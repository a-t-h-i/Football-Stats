{% extends 'index.html' %}
{% block content %}
<div id="main">
  <p>{{error}}</p>

  <form id="teamSelection">
    {% csrf_token %}
    <table>
      <tr>
  
        <td>
          <select name="homeTeam">
            <option value="" selected>Select Team</option>
            {% if names %}
            {% for name in names %}                                                          
              <option value="{{ name }}">{{ name }}</option>
            {% endfor %}
            {% endif %}
          </select>
        </td>

        <td><h4> vs </h4></td>

        <td>
          <select name="awayTeam">
            <option value"" selected>Select Team</option>
            {% if names %}

            {% for name in names %}
              <option value="{{ name }}">{{ name }}</option>
            {% endfor %}

            {% endif %}
          </select>
        </td>
  
        <td><button type="submit" onclick="displayStats()">Compare</button></td>

      </tr>
    </table>
  </form>

  <table id="compare_stats">
    <!-- Javascript will populate these stats based on the json info it recieved -->

      <tr>
        <td>
          <canvas id="homePie"></canvas>
          <canvas id="homeGraph"></canvas>
  
        </td>
        <td></td>
        <td>
          <canvas id="awayPie"> </canvas>
          <canvas id="awayGraph"> </canvas>
        </td>
        <td></td>
      </tr>

  </table>


  {% if home and away %}
  <form  method="post" action="/predict/">
    <!-- I'll handle this in the javascript backend and display the response here -->
    {% csrf_token %}
    <button id="predict" onclick="focus_prediction()">Get Analysis</button>
    <table id="prediction">
      {% if prediction %}
      <tr>
        <td colspan="4">
          <pre id="analysis">{{prediction}}</pre>
        </td>
      </tr>
      {% endif %}
    </table>
  </form>
  {% endif %}
</div>
{% endblock content %}

